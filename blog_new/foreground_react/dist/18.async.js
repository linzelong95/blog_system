(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{OugB:function(e,t,a){"use strict";var r=a("u+rM"),n=a("CKcX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("TlP+");var l=r(a("Kvux"));a("dgr1");var o=r(a("pG6y"));a("4AJE");var i=r(a("DGgL"));a("S1v9");var d=r(a("q1dK"));a("pCdJ");var u=r(a("4Nbk"));a("yiWn");var c=r(a("Jd3n"));a("KDdB");var f=r(a("12pV"));a("sv/Q");var s=r(a("y0qb"));a("mkII");var m=r(a("gEQx"));a("Bs8r");var p=r(a("iudn"));a("juKg");var g=r(a("zbZp"));a("+h6S");var y=r(a("pjOz"));a("yi5D");var h=r(a("2KNE"));a("GMBr");var E=r(a("xmhh"));a("B0zW");var S=r(a("Jzy4"));a("vmCv");var v=r(a("r1YA"));a("EmKL");var x,C,b,A=r(a("LVAb")),w=r(a("Z5GD")),k=r(a("smUt")),I=r(a("Pjwa")),B=r(a("2cji")),z=r(a("sp3j")),q=r(a("vZkh")),D=r(a("+KCP")),L=n(a("uqIC")),Q=a("LneV"),M=r(a("v99g")),T=r(a("xNuS")),O=a("T+dw"),U=a("+n12"),P=a("mstx"),j=P.UrlEnum.UserArticleAPI.LIST,F=P.UrlEnum.UserSortAPI,K=P.UrlEnum.UserTagAPI,V=(x=(0,Q.connect)(function(e){var t=e.articleManagement,a=e.loading;return{articleManagement:t,loading:a.models.articleManagement}}),x((b=function(e){function t(){var e,a;(0,I.default)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return a=(0,z.default)(this,(e=(0,q.default)(t)).call.apply(e,[this].concat(n))),a.state={conditionQuery:{title:"",category:{},orderBy:{}},showSorterFlag:!1,filterModalVisible:!1,categoryOptions:[],tagOptions:[],temporaryCondition:{},filterSort:"selectedByCate",timelines:[]},a.componentDidMount=function(){a.request({index:1,size:6}),a.request({size:5,conditionQuery:{orderBy:{name:"createDate",by:"DESC"}}},function(e){return a.setState({timelines:e.list})}),a.request({netUrl:K.LIST.url,conditionQuery:{isEnable:1},index:1,size:999},function(e){return a.setState({tagOptions:e.list})}),a.request({netUrl:F.LIST.url,conditionQuery:{isEnable:1},index:1,size:999},function(e){return a.setState({categoryOptions:e.list.filter(function(e){return e.categories&&e.categories.length>0})})})},a.componentWillUnmount=function(){return a.props.dispatch({type:"articleManagement/save",payload:{list:[]}})},a.request=function(e,t){var r=a.state.conditionQuery,n=(0,k.default)({},r);delete n.filteredSortArr;var l=(0,k.default)({netUrl:j.url,conditionQuery:n},e);a.props.dispatch({type:"articleManagement/handleArticles",payload:l,callback:t})},a.handleShowALL=function(){return a.setState({conditionQuery:{},temporaryCondition:{}},function(){a.request({index:1}),a.inputSearch.input.state.value=""})},a.handlePageChange=function(e,t){return a.request({index:e,size:t})},a.handleOnSearch=function(e){return a.setState(function(t){return{conditionQuery:(0,k.default)({},t.conditionQuery,{title:e.replace(/(^\s*)|(\s*$)/g,"")})}},function(){return a.request({index:1})})},a.toggleShowSorter=function(){var e=a.props.articleManagement.list,t=void 0===e?[]:e;t.length&&a.setState(function(e){return{showSorterFlag:!e.showSorterFlag}})},a.sort=function(e){if("default"===e)return a.setState(function(e){return{conditionQuery:(0,k.default)({},e.conditionQuery,{orderBy:{}})}},function(){return a.request({index:1})}),void a.toggleShowSorter();var t=e.currentTarget.id,r=a.state.conditionQuery.orderBy,n=void 0===r?{}:r;a.setState(function(e){return{conditionQuery:(0,k.default)({},e.conditionQuery,{orderBy:{name:t,by:"ASC"===n.by?"DESC":"ASC"}})}},function(){return a.request({index:1})})},a.toggleFilterModal=function(){return a.setState(function(e){return{filterModalVisible:!e.filterModalVisible}})},a.filterRequest=function(e){if("clear"!==e){"noModal"!==e&&a.toggleFilterModal();var t=!1;if("exit"===e){var r=a.state.conditionQuery,n=r.filteredSortArr,l=void 0===n?[]:n,o=r.tagIdsArr,i=void 0===o?[]:o;return t=l.length>0||i.length>0,void a.setState(function(e){return{temporaryCondition:(0,k.default)({},e.temporaryCondition,{filteredSortArr:l,tagIdsArr:i,filterflag:t})}})}var d=a.state.temporaryCondition,u=d.filteredSortArr,c=void 0===u?[]:u,f=d.tagIdsArr,s=void 0===f?[]:f;t=c.length>0||s.length>0;var m={sortIdsArr:[],cateIdsArr:[]};c.forEach(function(e){var t=e.split("-");1===t.length?m.sortIdsArr.push(parseInt(t.pop(),10)):m.sortIdsArr.includes(parseInt(t[0],10))||m.cateIdsArr.push(parseInt(t.pop(),10))}),a.setState(function(e){return{conditionQuery:(0,k.default)({},e.conditionQuery,{category:m,filteredSortArr:c,tagIdsArr:s}),temporaryCondition:(0,k.default)({},e.temporaryCondition,{filterflag:t})}},function(){return a.request({index:1})})}else a.setState({temporaryCondition:{}})},a.conditionTreeSelect=function(e){return a.setState(function(t){return{temporaryCondition:(0,k.default)({},t.temporaryCondition,{filteredSortArr:e})}})},a.handleTagSelect=function(e,t){var r=a.state.temporaryCondition.tagIdsArr,n=void 0===r?[]:r,l=t?[].concat((0,w.default)(n),[e]):n.filter(function(t){return t!==e});a.setState(function(e){return{temporaryCondition:(0,k.default)({},e.temporaryCondition,{tagIdsArr:l})}})},a.filterSort=function(e){return a.setState({filterSort:e.target.value})},a}return(0,D.default)(t,e),(0,B.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.articleManagement,r=a.total,n=void 0===r?6:r,x=a.list,C=void 0===x?[]:x,b=a.size,w=void 0===b?6:b,I=a.index,B=void 0===I?1:I,z=t.loading,q=this.state,D=q.filterSort,Q=q.showSorterFlag,P=q.filterModalVisible,j=q.categoryOptions,F=q.tagOptions,K=q.conditionQuery,V=q.temporaryCondition,R=q.timelines;return L.default.createElement(M.default,null,L.default.createElement(l.default,null,L.default.createElement(g.default,{type:"flex",align:"middle",style:{marginBottom:"15px"}},L.default.createElement(E.default,{xs:12,sm:13,md:15,lg:16,xl:17},L.default.createElement(A.default,{icon:"filter",type:V.filterflag?"danger":"primary",size:"small",onClick:this.toggleFilterModal},"\u7b5b\u9009\xa0"),L.default.createElement(A.default,{icon:Q?"right-circle-o":"left-circle-o",type:"primary",size:"small",onClick:this.toggleShowSorter,style:{marginLeft:"20px"}},"\u6392\u5e8f\xa0"),Q&&L.default.createElement(L.Fragment,null,L.default.createElement(v.default,{color:"magenta",style:{marginLeft:"10px"},onClick:function(){return e.sort("default")}},"\u9ed8\u8ba4"),L.default.createElement(v.default,{color:"magenta",id:"title",style:{marginLeft:"5px"},onClick:this.sort},"\u6807\u9898",L.default.createElement(S.default,{type:K.orderBy&&"title"===K.orderBy.name&&"DESC"===K.orderBy.by?"down":"up"})),L.default.createElement(v.default,{color:"magenta",id:"createDate",style:{marginLeft:"5px"},onClick:this.sort},"\u521b\u5efa\u65f6\u95f4",L.default.createElement(S.default,{type:K.orderBy&&"createDate"===K.orderBy.name&&"DESC"===K.orderBy.by?"down":"up"})),L.default.createElement(v.default,{color:"magenta",id:"updateDate",style:{marginLeft:"5px"},onClick:this.sort},"\u4fee\u6539\u65f6\u95f4",L.default.createElement(S.default,{type:K.orderBy&&"updateDate"===K.orderBy.name&&"DESC"===K.orderBy.by?"down":"up"})))),L.default.createElement(E.default,{xs:2,sm:2,md:1,lg:1,xl:1},L.default.createElement(h.default,{title:"\u9ed8\u8ba4\u5c55\u793a"},L.default.createElement(A.default,{type:"primary",icon:"home",shape:"circle",size:"small",onClick:this.handleShowALL}))),L.default.createElement(E.default,{xs:10,sm:9,md:8,lg:7,xl:6},L.default.createElement(y.default.Search,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",onSearch:this.handleOnSearch,enterButton:!0,allowClear:!0,ref:function(t){e.inputSearch=t}}))),L.default.createElement(g.default,{gutter:16},L.default.createElement(E.default,{span:17},L.default.createElement(m.default,{loading:z,itemLayout:"vertical",dataSource:C,pagination:{showQuickJumper:!0,showSizeChanger:!0,onChange:this.handlePageChange,onShowSizeChange:this.handlePageChange,pageSizeOptions:["6","12","18","24"],pageSize:w,defaultPageSize:6,total:n,current:B},renderItem:function(e){return L.default.createElement(m.default.Item,{key:e.id,actions:[L.default.createElement("span",null,L.default.createElement(S.default,{type:"edit"}),"\xa0",(0,U.timeFormat)(Number(new Date(e.createDate)))),L.default.createElement(S.default,{type:"star-o"}),L.default.createElement(S.default,{type:"like-o"}),L.default.createElement(S.default,{type:"message"}),L.default.createElement("span",null,e.tags.map(function(e){return L.default.createElement(v.default,{color:"volcano",key:e.id},e.name)}))],extra:L.default.createElement("img",{width:200,height:110,alt:"logo",src:e.imageUrl?"".concat(O.imgPrefix).concat(e.imageUrl):"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png"}),style:{position:"relative",overflow:"hidden"}},1===e.isTop&&L.default.createElement("div",{style:{position:"absolute",background:"gray",top:"5px",right:"-55px",width:"150px",textAlign:"center",transform:"rotate(40deg)",color:"yellow"}},"\u7f6e\u9876"),L.default.createElement(m.default.Item.Meta,{avatar:L.default.createElement(p.default,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:L.default.createElement("a",{href:"".concat(window.location.origin,"/article/").concat(e.id),target:"_blank",rel:"noreferrer noopener"},e.title,"\xa0\xa0",L.default.createElement(v.default,{color:"purple"},L.default.createElement(S.default,{type:"tag"}),e.category.sort.name,",",e.category.name)),style:{marginBottom:"0px"}}),L.default.createElement(T.default,{lines:2,style:{height:"40px"}},L.default.createElement("span",{style:{paddingLeft:"30px",fontWeight:"bold"}},"\u6458\u8981\uff1a"),e.abstract?e.abstract:"\u65e0"))}})),L.default.createElement(E.default,{span:7},L.default.createElement("div",{style:{textAlign:"center"}},L.default.createElement("p",null,L.default.createElement(p.default,{size:200,src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"})),L.default.createElement("span",{style:{fontSize:"25px",fontWeight:"bold",margin:"10px"}},"\u535a\u5ba2"),L.default.createElement(s.default,{style:{margin:"5px 0px"}},L.default.createElement("span",null,L.default.createElement("a",null,L.default.createElement(S.default,{type:"github"})),"\xa0\xa0",L.default.createElement("a",null,L.default.createElement(S.default,{type:"cloud"})))),L.default.createElement("span",null,"\u8fd9\u4e2a\u4eba\u5f88\u61d2\uff0c\u4ec0\u4e48\u90fd\u6ca1\u7559\u4e0b")),L.default.createElement("div",null,L.default.createElement(s.default,{style:{margin:"25px 0px 10px 0px"}},L.default.createElement(S.default,{type:"tags",style:{color:"purple"}})),F.map(function(t){return L.default.createElement(v.default,{onClick:function(){e.setState(function(e){return{temporaryCondition:(0,k.default)({},e.temporaryCondition,{tagIdsArr:[t.id]})}},function(){return e.filterRequest("noModal")})},color:(0,U.getRandomColor)(),style:{fontSize:"13px",margin:"3px"},key:t.id},t.name)})),L.default.createElement("div",null,L.default.createElement(s.default,{style:{margin:"25px 0px 10px 0px"}},L.default.createElement(S.default,{type:"clock-circle",style:{color:"blue"}})),L.default.createElement(f.default,{mode:"alternate"},R.map(function(e){return L.default.createElement(f.default.Item,{color:(0,U.getRandomColor)(),key:e.id},L.default.createElement("b",null,(0,U.timeFormat)(Number(new Date(e.updateDate)))),L.default.createElement("a",{href:"".concat(window.location.origin,"/article/").concat(e.id),target:"_blank",rel:"noreferrer noopener",style:{display:"block"}},e.title))}),L.default.createElement(f.default.Item,null,L.default.createElement("a",null,"more...")))))),L.default.createElement(o.default,{destroyOnClose:!0,visible:P,title:"\u8bf7\u9009\u62e9\u7b5b\u9009\u6761\u4ef6",onCancel:function(){return e.filterRequest("exit")},footer:[L.default.createElement(A.default,{onClick:function(){return e.filterRequest("exit")}},"\u4e0d\u66f4\u6539\u5e76\u9000\u51fa"),L.default.createElement(A.default,{type:"danger",onClick:function(){return e.filterRequest("clear")}},"\u6e05\u7a7a"),L.default.createElement(A.default,{type:"primary",onClick:this.filterRequest},"\u786e\u5b9a")]},L.default.createElement("div",{style:{textAlign:"center"}},L.default.createElement(u.default.Group,{size:"small",value:D,buttonStyle:"solid",onChange:this.filterSort},L.default.createElement(u.default.Button,{value:"selectedByCate"},L.default.createElement(c.default,{dot:V.filteredSortArr&&V.filteredSortArr.length>0},"\xa0\u6309\u5206\u7c7b\xa0\xa0")),L.default.createElement(u.default.Button,{value:"selectedByTag"},L.default.createElement(c.default,{dot:V.tagIdsArr&&V.tagIdsArr.length>0},"\xa0\u6309\u6807\u7b7e\xa0\xa0")))),L.default.createElement(d.default,{message:"\u7b5b\u9009\u5206\u4e24\u79cd\u7c7b\u522b\uff0c\u8bf7\u6ce8\u610f\u60a8\u662f\u5426\u9700\u8981\u540c\u65f6\u8fdb\u884c\u4e24\u79cd\u7c7b\u522b\u7684\u7b5b\u9009\uff01",type:"warning",showIcon:!0,style:{margin:"15px 0px"}}),"selectedByCate"===D&&L.default.createElement(i.default,{checkable:!0,showLine:!0,onCheck:this.conditionTreeSelect,checkedKeys:V.filteredSortArr||[]},j.map(function(e){return L.default.createElement(i.default.TreeNode,{title:e.name,key:"".concat(e.id),selectable:!1,disabled:0===e.isEnable},e.categories.map(function(t){return L.default.createElement(i.default.TreeNode,{title:t.name,key:"".concat(e.id,"-").concat(t.id),selectable:!1,disabled:1!==e.isEnable||0===t.isEnable})}))})),"selectedByTag"===D&&L.default.createElement(g.default,null,L.default.createElement(E.default,{span:3,style:{marginTop:"5px"}},"\u8bf7\u9009\u62e9\uff1a"),L.default.createElement(E.default,{span:21},F.map(function(t){return L.default.createElement(v.default.CheckableTag,{key:t.id,checked:V.tagIdsArr&&V.tagIdsArr.includes(t.id),onChange:function(a){return e.handleTagSelect(t.id,a)},style:{marginTop:"5px"}},t.name)}))))))}}]),t}(L.default.Component),C=b))||C),R=V;t.default=R}}]);