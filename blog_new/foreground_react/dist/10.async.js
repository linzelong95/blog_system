(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{n4E1:function(e,t,a){"use strict";var l=a("u+rM"),n=a("CKcX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("TlP+");var r=l(a("Kvux"));a("juKg");var i=l(a("zbZp"));a("+h6S");var o=l(a("pjOz"));a("GMBr");var u=l(a("xmhh"));a("yi5D");var d=l(a("2KNE"));a("yiWn");var c=l(a("Jd3n"));a("Wf8M");var s=l(a("Kolo"));a("EmKL");var f=l(a("LVAb"));a("vmCv");var m=l(a("r1YA"));a("B0zW");var p=l(a("Jzy4"));a("dgr1");var h,y,g,E=l(a("pG6y")),v=l(a("Z5GD")),I=l(a("smUt")),b=l(a("Pjwa")),S=l(a("2cji")),C=l(a("sp3j")),w=l(a("vZkh")),x=l(a("+KCP")),k=n(a("uqIC")),F=a("LneV"),L=l(a("zHco")),P=l(a("qmxc")),D=l(a("t9ya")),K=a("+n12"),T=a("mstx"),z=T.UrlEnum.AdminSortAPI,A=T.UrlEnum.AdminCateAPI,U=(h=(0,F.connect)(function(e){var t=e.articleManagement,a=e.loading;return{articleManagement:t,loading:a.models.articleManagement}}),h((g=function(e){function t(){var e,a;(0,b.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,C.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(n))),a.state={conditionQuery:{},editorialPanelVisible:!1,selectedItems:[],selectedRowKeys:[],tabKey:"sort",formItem:{},categoryOptions:[],filters:{},EditorialForm:D.default},a.componentDidMount=function(){return a.request({index:1,size:10})},a.componentWillUnmount=function(){return a.props.dispatch({type:"articleManagement/save",payload:{list:[]}})},a.request=function(e,t){var l=a.state,n=l.conditionQuery,r=l.tabKey,i="cate"===r?A.LIST.url:z.LIST.url,o=(0,I.default)({netUrl:i,conditionQuery:n},e);a.props.dispatch({type:"articleManagement/handleArticles",payload:o,callback:t}),o.netUrl!==i&&a.cleanSelectedItem()},a.handleShowALL=function(){return a.setState({conditionQuery:{},filters:{}},function(){a.request({index:1}),a.inputSearch.input.state.value=""})},a.cleanSelectedItem=function(){return a.setState({selectedRowKeys:[],selectedItems:[]})},a.cleanFormItem=function(){a.cleanSelectedItem(),a.setState({formItem:{}})},a.toggleEditorialPanel=function(e){var t=a.state,l=t.editorialPanelVisible,n=t.tabKey;l&&a.setState({EditorialForm:"cate"===n?P.default:D.default}),"son"===e&&a.setState({EditorialForm:P.default}),a.setState({editorialPanelVisible:!l})},a.handleTableChange=function(e,t,l){var n=e.current,r=e.pageSize,i=l.columnKey,o=l.order,u=t.isEnable,d=t.sort,c=u&&u.length>0?parseInt(u[0],10):void 0,s=d&&d.length>0?d.map(function(e){return parseInt(e,10)}):[],f=i?{name:i,by:"descend"===o?"DESC":"ASC"}:{};a.setState(function(e){return{filters:t,conditionQuery:(0,I.default)({},e.conditionQuery,{orderBy:f,isEnable:c,sortIdsArr:s})}},function(){return a.request({index:n,size:r})})},a.handleSelectRows=function(e,t){var l=a.state.selectedItems,n=[];n=l.length===e.length?t:l.length<e.length?[].concat((0,v.default)(l.filter(function(e){return t.every(function(t){return e.id!==t.id})})),(0,v.default)(t)):l.filter(function(t){return e.some(function(e){return e===t.id})}),a.setState({selectedRowKeys:e,selectedItems:n})},a.handleChangeTabs=function(e){a.props.dispatch({type:"articleManagement/save",payload:{list:[]}}),a.setState({tabKey:e,selectedRowKeys:[],selectedItems:[],conditionQuery:{},filters:{},EditorialForm:"cate"===e?P.default:D.default}),a.inputSearch&&a.inputSearch.input&&(a.inputSearch.input.state.value=""),"cate"===e?(a.request({netUrl:A.LIST.url,index:1,size:10}),a.request({netUrl:z.LIST.url,conditionQuery:{isEnable:1},index:1,size:999},function(e){return a.setState({categoryOptions:e.list})})):a.request({netUrl:z.LIST.url,index:1,size:10})},a.handleItems=function(e,t){var l=a.state,n=l.selectedItems,r=l.tabKey,i=a.props.articleManagement.lang,o=e.url,u=e.desc,d=e.actionTip,c="",s=[];if(t){var f=t.id,m=t.name;s=[{id:f,name:m}],c="\u3010".concat(s[0].name,"\u3011").concat(d[i])}else s=n.map(function(e){return{id:e.id,name:e.name}}),o.includes("/article")&&(s=n.map(function(e){return{id:e.id,name:e.title}})),c="zh_CN"===i?"\u6ce8\u610f\uff1a\u3010".concat(s[0].name,"......\u3011\u7b49\u591a\u4e2a\u6240\u9009\u9879").concat(d[i]):"warnning\uff1aSuch as\u3010".concat(s[0].name,"......\u3011,they ").concat(d[i]);var p="zh_CN"===i?"\u786e\u5b9a".concat(u[i],"\u5417\uff1f"):"Do you want to ".concat(u[i]," what you have selected?"),h="\u786e\u5b9a",y="\u53d6\u6d88",g=function(){return a.cleanSelectedItem()},v=function(){if(o.includes("/form"))a.setState({formItem:t,EditorialForm:o.includes("/cate/form")?P.default:D.default},function(){return a.toggleEditorialPanel()});else{var e="sort"===r&&o.includes("/cate")?function(){return a.request()}:void 0;a.request({netUrl:o,items:s},e)}};E.default.confirm({title:p,content:c,okText:h,cancelText:y,onCancel:g,onOk:v})},a.handleOnSearch=function(e){return a.setState(function(t){return{conditionQuery:(0,I.default)({},t.conditionQuery,{name:e.replace(/(^\s*)|(\s*$)/g,"")})}},function(){return a.request({index:1})})},a}return(0,x.default)(t,e),(0,S.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.articleManagement,l=a.total,n=void 0===l?10:l,h=a.list,y=void 0===h?[]:h,g=a.size,E=void 0===g?10:g,v=a.index,b=void 0===v?1:v,S=t.loading,C=this.state,w=C.selectedItems,x=C.editorialPanelVisible,F=C.formItem,P=C.categoryOptions,D=C.filters,T=C.selectedRowKeys,U=C.tabKey,M=C.EditorialForm,q=[{key:"sort",tab:"\u6240\u6709\u5206\u7c7b"},{key:"cate",tab:"\u4e8c\u7ea7\u5206\u7c7b"}],O=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",sorter:!0,width:"20%"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createDate",key:"createDate",sorter:!0,width:"20%",render:function(e){return k.default.createElement("span",null,k.default.createElement(p.default,{type:"clock-circle"}),"\xa0",(0,K.timeFormat)(Number(new Date(e))))}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateDate",key:"updateDate",sorter:!0,width:"20%",render:function(e){return k.default.createElement("span",null,k.default.createElement(p.default,{type:"edit"}),"\xa0",(0,K.timeFormat)(Number(new Date(e))))}},{title:"\u72b6\u6001",dataIndex:"isEnable",key:"isEnable",sorter:!0,width:"20%",filters:[{text:"\u4e0d\u53ef\u7528",value:0},{text:"\u53ef\u7528",value:1}],filterMultiple:!1,filteredValue:D.isEnable||null,render:function(e){return k.default.createElement(m.default,{color:1===e?"blue":"gray"},1===e?"\u53ef\u7528":"\u4e0d\u53ef\u7528")}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:"20%",render:function(t,a){return k.default.createElement(k.Fragment,null,k.default.createElement(f.default,{icon:"form",size:"small",shape:"circle",onClick:function(){return e.handleItems(z.FORM,a)},style:{color:"#8B3A3A"}}),k.default.createElement(f.default,{icon:"delete",size:"small",shape:"circle",onClick:function(){return e.handleItems(z.DELETE,a)},style:{color:"red",marginLeft:"10px"}}),1===a.isEnable&&k.default.createElement(f.default,{icon:"lock",size:"small",shape:"circle",onClick:function(){return e.handleItems(z.LOCK,a)},style:{color:"#A020F0",marginLeft:"10px"}}),0===a.isEnable&&k.default.createElement(f.default,{icon:"unlock",size:"small",shape:"circle",onClick:function(){return e.handleItems(z.UNLOCK,a)},style:{color:"green",marginLeft:"10px"}}))}}],N=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",sorter:!0,width:"15%"},{title:"\u6240\u5c5e",dataIndex:"sort",key:"sort",sorter:!0,width:"15%",filters:P.map(function(e){return{text:e.name,value:e.id}}),filteredValue:D.sort||null,render:function(e){return k.default.createElement("span",null,e.name)}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createDate",key:"createDate",sorter:!0,width:"20%",render:function(e){return k.default.createElement("span",null,k.default.createElement(p.default,{type:"clock-circle"}),"\xa0",(0,K.timeFormat)(Number(new Date(e))))}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateDate",key:"updateDate",sorter:!0,width:"20%",render:function(e){return k.default.createElement("span",null,k.default.createElement(p.default,{type:"edit"}),"\xa0",(0,K.timeFormat)(Number(new Date(e))))}},{title:"\u72b6\u6001",dataIndex:"isEnable",key:"isEnable",width:"10%",sorter:!0,filters:[{text:"\u4e0d\u53ef\u7528",value:0},{text:"\u53ef\u7528",value:1}],filterMultiple:!1,filteredValue:D.isEnable||null,render:function(e){return k.default.createElement(m.default,{color:1===e?"blue":"gray"},1===e?"\u53ef\u7528":"\u4e0d\u53ef\u7528")}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:"20%",render:function(t,a){return k.default.createElement(k.Fragment,null,k.default.createElement(f.default,{icon:"form",size:"small",shape:"circle",onClick:function(){return e.handleItems(A.FORM,a)},style:{color:"#8B3A3A"}}),k.default.createElement(f.default,{icon:"delete",size:"small",shape:"circle",onClick:function(){return e.handleItems(A.DELETE,a)},style:{color:"red",marginLeft:"10px"}}),1===a.isEnable&&k.default.createElement(f.default,{icon:"lock",size:"small",shape:"circle",onClick:function(){return e.handleItems(A.LOCK,a)},style:{color:"#A020F0",marginLeft:"10px"}}),0===a.isEnable&&k.default.createElement(f.default,{icon:"unlock",size:"small",shape:"circle",onClick:function(){return e.handleItems(A.UNLOCK,a)},style:{color:"green",marginLeft:"10px"}}))}}],V=function(t){return k.default.createElement(s.default,{columns:N.filter(function(e){return"sort"!==e.dataIndex}).map(function(e){return(0,I.default)({},e,{width:"20%",align:"right"})}),rowKey:function(e){return e.id},onChange:e.handleTableChange,loading:S,dataSource:t.categories,pagination:!1,showHeader:!1})};return k.default.createElement(L.default,{tabList:q,onTabChange:this.handleChangeTabs},k.default.createElement(r.default,null,k.default.createElement(i.default,{type:"flex",align:"middle",style:{marginBottom:"15px"}},k.default.createElement(u.default,{xs:12,sm:13,md:15,lg:16,xl:17},k.default.createElement(f.default,{icon:"plus",type:"primary",size:"small",onClick:this.toggleEditorialPanel},"\u65b0\u589e\xa0"),"sort"===U&&k.default.createElement(f.default,{icon:"plus",type:"primary",size:"small",style:{marginLeft:"20px"},onClick:function(){return e.toggleEditorialPanel("son")}},"\u65b0\u589e\u5b50\u5206\u7c7b\xa0"),w.length>0&&k.default.createElement(k.Fragment,null,k.default.createElement(c.default,{count:w.length,title:"\u5df2\u9009\u9879\u6570"},"\xa0",k.default.createElement(f.default,{icon:"reload",type:"primary",size:"small",onClick:this.cleanSelectedItem,style:{marginLeft:"16px"}},"\u6e05\u7a7a\xa0")),k.default.createElement(d.default,{title:"\u4e00\u952e\u5220\u9664"},k.default.createElement(f.default,{icon:"delete",size:"small",shape:"circle",onClick:function(){return e.handleItems("sort"===U?z.DELETE:A.DELETE)},style:{color:"red",marginLeft:"20px"}})),k.default.createElement(d.default,{title:"\u4e00\u952e\u89e3\u9501"},k.default.createElement(f.default,{icon:"unlock",size:"small",shape:"circle",onClick:function(){return e.handleItems("sort"===U?z.UNLOCK:A.UNLOCK)},style:{color:"green",marginLeft:"10px"}})),k.default.createElement(d.default,{title:"\u4e00\u952e\u9501\u5b9a"},k.default.createElement(f.default,{icon:"lock",size:"small",shape:"circle",onClick:function(){return e.handleItems("sort"===U?z.LOCK:A.LOCK)},style:{color:"#A020F0",marginLeft:"10px"}})))),k.default.createElement(u.default,{xs:2,sm:2,md:1,lg:1,xl:1},k.default.createElement(d.default,{title:"\u9ed8\u8ba4\u5c55\u793a"},k.default.createElement(f.default,{type:"primary",icon:"home",shape:"circle",size:"small",onClick:this.handleShowALL}))),k.default.createElement(u.default,{xs:10,sm:9,md:8,lg:7,xl:6},k.default.createElement(o.default.Search,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",onSearch:this.handleOnSearch,enterButton:!0,allowClear:!0,ref:function(t){e.inputSearch=t}}))),k.default.createElement(s.default,{columns:"cate"===U?N:O,rowKey:function(e){return e.id},onChange:this.handleTableChange,rowSelection:{selectedRowKeys:T,onChange:this.handleSelectRows},loading:S,dataSource:y,pagination:{showQuickJumper:!0,showSizeChanger:!0,current:b,total:n,pageSize:E},expandedRowRender:"sort"===U?function(e){return V(e)}:void 0}),x&&k.default.createElement(M,{editorialPanelVisible:x,toggleEditorialPanel:this.toggleEditorialPanel,cleanFormItem:this.cleanFormItem,formItem:F,request:this.request,tabKey:U})))}}]),t}(k.default.Component),y=g))||y),M=U;t.default=M},qmxc:function(e,t,a){"use strict";var l=a("u+rM");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("smUt")),r=l(a("Pjwa")),i=l(a("2cji")),o=l(a("sp3j")),u=l(a("vZkh")),d=l(a("+KCP"));a("mj0v");var c,s,f,m=l(a("5m8i")),p=l(a("uqIC")),h=a("mstx"),y=l(a("SNkE")),g=y.default.getModalForm,E=h.UrlEnum.AdminCateAPI,v=E.INSERT,I=E.UPDATE,b=E.LIST,S=h.UrlEnum.AdminSortAPI,C=(c=m.default.create(),c((f=function(e){function t(){var e,a;(0,r.default)(this,t);for(var l=arguments.length,i=new Array(l),d=0;d<l;d++)i[d]=arguments[d];return a=(0,o.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(i))),a.state={initialFormData:{},categoryOptions:[]},a.componentDidMount=function(){var e=a.props,t=e.formItem,l=void 0===t?{}:t,n=e.request;n({netUrl:S.LIST.url,index:1,size:999},function(e){return a.setState({categoryOptions:e.list})}),l.id&&a.formatInitialFormData(l)},a.formatInitialFormData=function(e,t){var l=a.props.request,r=e.sort;if(r){var i=(0,n.default)({},e,{sort:{label:r.name,key:r.id}});a.setState((0,n.default)({initialFormData:i},t))}else l({netUrl:b.url},function(l){var r=(0,n.default)({},e,{sort:{label:l.list[0].sort.name,key:l.list[0].sort.id}});a.setState((0,n.default)({initialFormData:r},t))})},a.toggleEdit=function(e){var t=a.props,l=t.form,r=t.request,i=t.cleanFormItem,o=t.toggleEditorialPanel,u=t.formItem.id,d=t.tabKey;if("cancel"===e)return l.resetFields(),o(),i(),void r();l.validateFields(function(e,t){if(!e){var a=t.sort,c=u?I.url:v.url;r((0,n.default)({},t,{id:u,netUrl:c,sortId:a.key}),"sort"===d?function(){return r()}:void 0),o(),i(),l.resetFields()}})},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.editorialPanelVisible,l=this.state,n=l.initialFormData,r=l.categoryOptions,i=[{fieldId:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u540d\u79f0\u662f\u5fc5\u987b\u7684"}],fieldProps:{style:{width:"86%"}},fieldType:"input",formItemLayout:{labelCol:{span:6}}},{fieldId:"sort",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u5206\u7c7b\u662f\u5fc5\u987b\u7684"}],fieldType:"select",fieldProps:{options:r.map(function(e){return{label:e.name,value:e.id,disabled:!e.isEnable}}),labelInValue:!0,style:{width:"86%"}},formItemLayout:{labelCol:{span:6}}},{fieldId:"isEnable",label:"\u72b6\u6001",fieldType:"select",fieldProps:{options:[{value:0,label:"\u4e0d\u53ef\u7528"},{value:1,label:"\u53ef\u7528"}],style:{width:"86%"}},initialValue:1,formItemLayout:{labelCol:{span:6}}}];return g({initialFormData:n,editorialPanelVisible:a,toggleEdit:this.toggleEdit,form:t,formConfig:i,INSERT:v,UPDATE:I,width:600})}}]),t}(p.default.PureComponent),s=f))||s),w=C;t.default=w},t9ya:function(e,t,a){"use strict";var l=a("u+rM");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("smUt")),r=l(a("Pjwa")),i=l(a("2cji")),o=l(a("sp3j")),u=l(a("vZkh")),d=l(a("+KCP"));a("mj0v");var c,s,f,m=l(a("5m8i")),p=l(a("uqIC")),h=a("mstx"),y=l(a("SNkE")),g=y.default.getModalForm,E=h.UrlEnum.AdminSortAPI,v=E.INSERT,I=E.UPDATE,b=(c=m.default.create(),c((f=function(e){function t(){var e,a;(0,r.default)(this,t);for(var l=arguments.length,i=new Array(l),d=0;d<l;d++)i[d]=arguments[d];return a=(0,o.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(i))),a.state={initialFormData:{}},a.componentDidMount=function(){var e=a.props.formItem,t=void 0===e?{}:e;t.id&&a.formatInitialFormData(t)},a.formatInitialFormData=function(e,t){a.setState((0,n.default)({initialFormData:e},t))},a.handleSetState=function(e,t){return a.setState((0,n.default)({},e),function(){return t})},a.handleGetState=function(e){return a.state[e]},a.toggleEdit=function(e){var t=a.props,l=t.form,r=t.request,i=t.cleanFormItem,o=t.toggleEditorialPanel,u=t.formItem.id;if("cancel"===e)return l.resetFields(),o(),i(),void r();l.validateFields(function(e,t){if(!e){var a=u?I.url:v.url;r((0,n.default)({},t,{id:u,netUrl:a})),o(),i(),l.resetFields()}})},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.editorialPanelVisible,l=this.state.initialFormData,n=[{fieldId:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u540d\u79f0\u662f\u5fc5\u987b\u7684"}],fieldProps:{style:{width:"86%"}},fieldType:"input",formItemLayout:{labelCol:{span:6}}},{fieldId:"isEnable",label:"\u72b6\u6001",fieldType:"select",fieldProps:{options:[{value:0,label:"\u4e0d\u53ef\u7528"},{value:1,label:"\u53ef\u7528"}],style:{width:"86%"}},initialValue:1,formItemLayout:{labelCol:{span:6}}}];return g({initialFormData:l,editorialPanelVisible:a,toggleEdit:this.toggleEdit,form:t,formConfig:n,INSERT:v,UPDATE:I,width:600})}}]),t}(p.default.PureComponent),s=f))||s),S=b;t.default=S}}]);