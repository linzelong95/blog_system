(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{SgNn:function(e,t,n){"use strict";var l=n("u+rM");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("smUt")),r=l(n("Pjwa")),i=l(n("2cji")),o=l(n("sp3j")),u=l(n("vZkh")),d=l(n("+KCP"));n("mj0v");var c,s,f,m=l(n("5m8i")),p=l(n("uqIC")),h=n("mstx"),g=l(n("SNkE")),y=g.default.getModalForm,E=h.UrlEnum.AdminTagAPI,v=E.INSERT,I=E.UPDATE,S=h.UrlEnum.AdminSortAPI,b=(c=m.default.create(),c((f=function(e){function t(){var e,n;(0,r.default)(this,t);for(var l=arguments.length,i=new Array(l),d=0;d<l;d++)i[d]=arguments[d];return n=(0,o.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(i))),n.state={initialFormData:{},categoryOptions:[]},n.componentDidMount=function(){var e=n.props,t=e.formItem,l=void 0===t?{}:t,a=e.request;a({netUrl:S.LIST.url,index:1,size:999},function(e){return n.setState({categoryOptions:e.list})}),l.id&&n.formatInitialFormData(l)},n.formatInitialFormData=function(e,t){var l=e.sort,r=(0,a.default)({},e,{sort:{label:l.name,key:l.id}});n.setState((0,a.default)({initialFormData:r},t))},n.toggleEdit=function(e){var t=n.props,l=t.form,r=t.request,i=t.cleanFormItem,o=t.toggleEditorialPanel,u=t.formItem.id;if("cancel"===e)return l.resetFields(),o(),i(),void r();l.validateFields(function(e,t){if(!e){var n=t.sort,d=u?I.url:v.url;r((0,a.default)({},t,{id:u,netUrl:d,sortId:n.key})),o(),i(),l.resetFields()}})},n}return(0,d.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=e.editorialPanelVisible,l=this.state,a=l.initialFormData,r=l.categoryOptions,i=[{fieldId:"name",label:"\u540d\u79f0",rules:[{required:!0,message:"\u540d\u79f0\u662f\u5fc5\u987b\u7684"}],fieldProps:{style:{width:"86%"}},fieldType:"input",formItemLayout:{labelCol:{span:6}}},{fieldId:"sort",label:"\u5206\u7c7b",rules:[{required:!0,message:"\u5206\u7c7b\u662f\u5fc5\u987b\u7684"}],fieldType:"select",fieldProps:{options:r.map(function(e){return{label:e.name,value:e.id,disabled:!e.isEnable}}),labelInValue:!0,style:{width:"86%"}},formItemLayout:{labelCol:{span:6}}},{fieldId:"isEnable",label:"\u72b6\u6001",fieldType:"select",fieldProps:{options:[{value:0,label:"\u4e0d\u53ef\u7528"},{value:1,label:"\u53ef\u7528"}],style:{width:"86%"}},initialValue:1,formItemLayout:{labelCol:{span:6}}}];return y({initialFormData:a,editorialPanelVisible:n,toggleEdit:this.toggleEdit,form:t,formConfig:i,INSERT:v,UPDATE:I,width:600})}}]),t}(p.default.PureComponent),s=f))||s),w=b;t.default=w},"e+VZ":function(e,t,n){"use strict";var l=n("u+rM"),a=n("CKcX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("TlP+");var r=l(n("Kvux"));n("Wf8M");var i=l(n("Kolo"));n("juKg");var o=l(n("zbZp"));n("+h6S");var u=l(n("pjOz"));n("GMBr");var d=l(n("xmhh"));n("yi5D");var c=l(n("2KNE"));n("yiWn");var s=l(n("Jd3n"));n("EmKL");var f=l(n("LVAb"));n("vmCv");var m=l(n("r1YA"));n("B0zW");var p=l(n("Jzy4"));n("dgr1");var h,g,y,E=l(n("pG6y")),v=l(n("Z5GD")),I=l(n("smUt")),S=l(n("Pjwa")),b=l(n("2cji")),w=l(n("sp3j")),x=l(n("vZkh")),C=l(n("+KCP")),k=a(n("uqIC")),P=n("LneV"),z=l(n("v99g")),A=l(n("SgNn")),L=n("+n12"),D=n("mstx"),F=D.UrlEnum.AdminTagAPI,T=F.LIST,M=F.DELETE,K=F.LOCK,U=F.UNLOCK,q=F.FORM,O=D.UrlEnum.AdminSortAPI,V=(h=(0,P.connect)(function(e){var t=e.articleManagement,n=e.loading;return{articleManagement:t,loading:n.models.articleManagement}}),h((y=function(e){function t(){var e,n;(0,S.default)(this,t);for(var l=arguments.length,a=new Array(l),r=0;r<l;r++)a[r]=arguments[r];return n=(0,w.default)(this,(e=(0,x.default)(t)).call.apply(e,[this].concat(a))),n.state={conditionQuery:{},editorialPanelVisible:!1,selectedItems:[],selectedRowKeys:[],formItem:{},categoryOptions:[],filters:{}},n.componentDidMount=function(){n.request({index:1,size:10}),n.request({netUrl:O.LIST.url,conditionQuery:{isEnable:1},index:1,size:999},function(e){return n.setState({categoryOptions:e.list.map(function(e){var t=(0,I.default)({},e);return t.disabled=!e.isEnable,t})})})},n.componentWillUnmount=function(){return n.props.dispatch({type:"articleManagement/save",payload:{list:[]}})},n.request=function(e,t){var l=n.state.conditionQuery,a=T.url,r=(0,I.default)({netUrl:a,conditionQuery:l},e);n.props.dispatch({type:"articleManagement/handleArticles",payload:r,callback:t}),r.netUrl!==a&&n.cleanSelectedItem()},n.handleShowALL=function(){return n.setState({conditionQuery:{},filters:{}},function(){n.request({index:1}),n.inputSearch.input.state.value=""})},n.cleanSelectedItem=function(){return n.setState({selectedRowKeys:[],selectedItems:[]})},n.cleanFormItem=function(){n.cleanSelectedItem(),n.setState({formItem:{}})},n.toggleEditorialPanel=function(){return n.setState(function(e){return{editorialPanelVisible:!e.editorialPanelVisible}})},n.handleTableChange=function(e,t,l){var a=e.current,r=e.pageSize,i=l.columnKey,o=l.order,u=t.isEnable,d=t.sort,c=u&&u.length>0?parseInt(u[0],10):void 0,s=d&&d.length>0?d.map(function(e){return parseInt(e,10)}):[],f=i?{name:i,by:"descend"===o?"DESC":"ASC"}:{};n.setState(function(e){return{filters:t,conditionQuery:(0,I.default)({},e.conditionQuery,{orderBy:f,isEnable:c,sortIdsArr:s})}},function(){return n.request({index:a,size:r})})},n.handleSelectRows=function(e,t){var l=n.state.selectedItems,a=[];a=l.length===e.length?t:l.length<e.length?[].concat((0,v.default)(l.filter(function(e){return t.every(function(t){return e.id!==t.id})})),(0,v.default)(t)):l.filter(function(t){return e.some(function(e){return e===t.id})}),n.setState({selectedRowKeys:e,selectedItems:a})},n.handleItems=function(e,t){var l=n.state.selectedItems,a=n.props.articleManagement.lang,r=e.url,i=e.desc,o=e.actionTip,u="",d=[];if(t){var c=t.id,s=t.name;d=[{id:c,name:s}],u="\u3010".concat(d[0].name,"\u3011").concat(o[a])}else d=l.map(function(e){return{id:e.id,name:e.name}}),r.includes("/article")&&(d=l.map(function(e){return{id:e.id,name:e.title}})),u="zh_CN"===a?"\u6ce8\u610f\uff1a\u3010".concat(d[0].name,"......\u3011\u7b49\u591a\u4e2a\u6240\u9009\u9879").concat(o[a]):"warnning\uff1aSuch as\u3010".concat(d[0].name,"......\u3011,they ").concat(o[a]);var f="zh_CN"===a?"\u786e\u5b9a".concat(i[a],"\u5417\uff1f"):"Do you want to ".concat(i[a]," what you have selected?"),m="\u786e\u5b9a",p="\u53d6\u6d88",h=function(){return n.cleanSelectedItem()},g=function(){if(r.includes("/form"))return n.setState({formItem:t}),void n.toggleEditorialPanel();n.request({netUrl:r,items:d})};E.default.confirm({title:f,content:u,okText:m,cancelText:p,onCancel:h,onOk:g})},n.handleOnSearch=function(e){return n.setState(function(t){return{conditionQuery:(0,I.default)({},t.conditionQuery,{name:e.replace(/(^\s*)|(\s*$)/g,"")})}},function(){return n.request({index:1})})},n}return(0,C.default)(t,e),(0,b.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.articleManagement,l=n.total,a=void 0===l?10:l,h=n.list,g=void 0===h?[]:h,y=n.size,E=void 0===y?10:y,v=n.index,I=void 0===v?1:v,S=t.loading,b=this.state,w=b.selectedItems,x=b.editorialPanelVisible,C=b.formItem,P=b.categoryOptions,D=b.filters,F=b.selectedRowKeys,T=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",sorter:!0,width:"15%"},{title:"\u6240\u5c5e",dataIndex:"sort",key:"sort",sorter:!0,width:"15%",filters:P.map(function(e){return{text:e.name,value:e.id}}),filteredValue:D.sort||null,render:function(e){return k.default.createElement("span",null,e.name)}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createDate",key:"createDate",sorter:!0,width:"20%",render:function(e){return k.default.createElement("span",null,k.default.createElement(p.default,{type:"clock-circle"}),"\xa0",(0,L.timeFormat)(Number(new Date(e))))}},{title:"\u4fee\u6539\u65f6\u95f4",dataIndex:"updateDate",key:"updateDate",sorter:!0,width:"20%",render:function(e){return k.default.createElement("span",null,k.default.createElement(p.default,{type:"edit"}),"\xa0",(0,L.timeFormat)(Number(new Date(e))))}},{title:"\u72b6\u6001",dataIndex:"isEnable",key:"isEnable",width:"10%",sorter:!0,filters:[{text:"\u4e0d\u53ef\u7528",value:0},{text:"\u53ef\u7528",value:1}],filterMultiple:!1,filteredValue:D.isEnable||null,render:function(e){return k.default.createElement(m.default,{color:1===e?"blue":"gray"},1===e?"\u53ef\u7528":"\u4e0d\u53ef\u7528")}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",width:"20%",render:function(t,n){return k.default.createElement(k.Fragment,null,k.default.createElement(f.default,{icon:"form",size:"small",shape:"circle",onClick:function(){return e.handleItems(q,n)},style:{color:"#8B3A3A"}}),k.default.createElement(f.default,{icon:"delete",size:"small",shape:"circle",onClick:function(){return e.handleItems(M,n)},style:{color:"red",marginLeft:"10px"}}),1===n.isEnable&&k.default.createElement(f.default,{icon:"lock",size:"small",shape:"circle",onClick:function(){return e.handleItems(K,n)},style:{color:"#A020F0",marginLeft:"10px"}}),0===n.isEnable&&k.default.createElement(f.default,{icon:"unlock",size:"small",shape:"circle",onClick:function(){return e.handleItems(U,n)},style:{color:"green",marginLeft:"10px"}}))}}];return k.default.createElement(z.default,null,k.default.createElement(r.default,null,k.default.createElement(o.default,{type:"flex",align:"middle",style:{marginBottom:"15px"}},k.default.createElement(d.default,{xs:12,sm:13,md:15,lg:16,xl:17},k.default.createElement(f.default,{icon:"plus",type:"primary",size:"small",onClick:this.toggleEditorialPanel},"\u65b0\u589e\xa0"),w.length>0&&k.default.createElement(k.Fragment,null,k.default.createElement(s.default,{count:w.length,title:"\u5df2\u9009\u9879\u6570"},"\xa0",k.default.createElement(f.default,{icon:"reload",type:"primary",size:"small",onClick:this.cleanSelectedItem,style:{marginLeft:"16px"}},"\u6e05\u7a7a\xa0")),k.default.createElement(c.default,{title:"\u4e00\u952e\u5220\u9664"},k.default.createElement(f.default,{icon:"delete",size:"small",shape:"circle",onClick:function(){return e.handleItems(M)},style:{color:"red",marginLeft:"20px"}})),k.default.createElement(c.default,{title:"\u4e00\u952e\u89e3\u9501"},k.default.createElement(f.default,{icon:"unlock",size:"small",shape:"circle",onClick:function(){return e.handleItems(U)},style:{color:"green",marginLeft:"10px"}})),k.default.createElement(c.default,{title:"\u4e00\u952e\u9501\u5b9a"},k.default.createElement(f.default,{icon:"lock",size:"small",shape:"circle",onClick:function(){return e.handleItems(K)},style:{color:"#A020F0",marginLeft:"10px"}})))),k.default.createElement(d.default,{xs:2,sm:2,md:1,lg:1,xl:1},k.default.createElement(c.default,{title:"\u9ed8\u8ba4\u5c55\u793a"},k.default.createElement(f.default,{type:"primary",icon:"home",shape:"circle",size:"small",onClick:this.handleShowALL}))),k.default.createElement(d.default,{xs:10,sm:9,md:8,lg:7,xl:6},k.default.createElement(u.default.Search,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",onSearch:this.handleOnSearch,enterButton:!0,allowClear:!0,ref:function(t){e.inputSearch=t}}))),k.default.createElement(i.default,{columns:T,rowKey:function(e){return e.id},onChange:this.handleTableChange,rowSelection:{selectedRowKeys:F,onChange:this.handleSelectRows},loading:S,dataSource:g,pagination:{showQuickJumper:!0,showSizeChanger:!0,current:I,total:a,pageSize:E}}),x&&k.default.createElement(A.default,{editorialPanelVisible:x,toggleEditorialPanel:this.toggleEditorialPanel,cleanFormItem:this.cleanFormItem,formItem:C,request:this.request})))}}]),t}(k.default.Component),g=y))||g),j=V;t.default=j}}]);